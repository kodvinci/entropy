# README

### Payload Format
The payload is in the form of a 32-bit unsigned int and so needs to be decoded to a decimal number using the decoder function. The function is found in the console in the decoder tab under the Payload Format section.

### Data Storage Integration
To make the data generated by the device accessible over a RESTful API, add a Data Storage integration to the application. This can be done using the steps outlined [in this tutorial](https://www.youtube.com/watch?v=kVf8GmCbOuE). Once the integration has been added and authorized (using the access key contained in the overview tap), the data generated by the device is stored on a swagger database hosted by The Things Network under a domain name similar to the app ID. This database stores data for 7 days. 

### Data Access Over a RESTful API
To query the data contained in the application, send a request to the following url:
```
https://app-id.data.thethingsnetwork.org/api/v2/query?
```
An example of a curl request to get the data from the last hour is below:
```
curl -X GET --header 'Accept: application/json' --header 'Authorization: key your-app-access-key-here' 'https://app-id.data.thethingsnetwork.org/api/v2/query?last=1h'
```
The return value is a JSON array. Each JSON object contains amongst its keys a device_id representing which device generated that particular data.
From here, the data can presented as fit.

### Run The App Locally
To run the application on your system, install the correct version of Ruby contained in the Gemfile. Open a terminal window and clone the repository, navigate into its cloned folder and run the following commands:
```
- bundle install
- rake db:create
- rake db:migrate
- rails s
```
Point your browser to ```localhost:3000``` and you should be able to see a graph of the data fetched from the things network.
### Hosted Example
An example of this application is hosted on [Heroku](https://kaiote-entropy.herokuapp.com/).
